---
import Base from "../layouts/base.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("posts");

const pages = await Astro.glob("../pages/**/*.astro");

const prefix = import.meta.env.DEV ? "/" : "/blog";

const urls = [
  ...posts.map((post) => `${prefix}${prefix === "/" ? "" : "/"}${post.slug}`),
  ...pages
    .filter(
      (page) => !page.url?.includes("[") && !page.url?.includes("index.astro"),
    )
    .map((page) => `${prefix === "/" ? "" : prefix}${page.url}`),
];
---

<Base>
  {
    urls.map((url) => (
      <a
        class="text-blue-500 hover:text-white bg-blue-100 hover:bg-blue-500 border border-blue-500 rounded-md px-4 py-2 transition duration-300"
        href={url}
      >
        {url}
      </a>
    ))
  }
</Base>
