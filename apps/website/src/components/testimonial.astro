---
import { getCollection } from "astro:content";

const testimonialCollections = await getCollection("testimonials");

const testimonials = [];

for (const testimonial of testimonialCollections) {
  const { Content } = await testimonial.render();
  testimonials.push({
    Content,
    name: testimonial.data.name,
    title: testimonial.data.title,
  });
}
---

<section
  class="flex flex-col items-start px-[28px] py-[96px] gap-[48px] max-w-[1280px] h-[688px] z-[3] font-poppins"
>
  <div
    class="flex justify-center items-center px-[104px] gap-[10px] mx-auto mb-8"
  >
    <h2
      class="font-medium text-[74px] leading-[84px] tracking-[-0.02em] text-center capitalize text-[#3C3843] flex-grow"
    >
      What Our Clients Say
    </h2>
  </div>

  <div
    class="flex flex-row justify-center items-start p-0 gap-[8px] flex-none order-1 self-stretch flex-grow-0"
  >
    <div class="grid grid-cols-6 md:grid-cols-12 gap-3 md:gap-7 w-full h-full">
      {
        testimonials.map(({ name, Content, title }) => (
          <div class="flex flex-col items-start bg-[#E8E8E8] rounded-2xl p-7 gap-[28px] col-span-4 sm:max-md:mb-8">
            <p class="leading-7 text-black">
              <Content />
            </p>
            <div class="flex flex-row justify-center items-center gap-3">
              <div class="size-12 bg-[#D9D9D9] rounded-full flex flex-shrink-0 items-center justify-center">
                <span class="text-h6">üêä</span>
              </div>
              <div class="flex flex-col text-[20px] leading-7 text-black">
                <p class="font-bold">{name}</p>
                <p class="font-normal">{title}</p>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
