---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import classnames from 'classnames';

interface Props {
  idx: number;
  title: string;
  content: any;
  styles: string;
  imgPath: string;
  imgAlt: string;
  onDark?: boolean;
  classNames?: string | string[];
}

const { idx, title, content, styles, imgPath, imgAlt, onDark, classNames } =
  Astro.props;

const Content = content;

const images = import.meta.glob<{ default: ImageMetadata }>(
  '/src/assets/images/services/*.png'
);
---

<div
  class={classnames(
    `
    lg:[&[data-show="true"]]:opacity-100
    rounded-2xl
    max-lg:col-span-6
    md:gap-x-7
    w-full
    lg:transition-opacity
    lg:duration-400
    lg:absolute
    lg:ease-in-out
    lg:opacity-0
    lg:h-screen
    overflow-hidden
    `,
    styles
  )}
  data-show=''
>
  <section
    class={classnames(
      `text-neutral-50
      md:h-screen
      p-7
      lg:p-12 
      grid
      grid-cols-6
      grid-rows-[auto_auto_auto]
      gap-x-3
      gap-y-7
      lg:gap-x-7
      lg:grid-cols-2
      lg:grid-rows-[44px_auto]
      backdrop-blur-[30px]
      `,
      classNames,
      {
        'text-neutral-50': onDark,
        'text-[#3C3843]': !onDark,
      }
    )}
  >
    <span class='font-medium text-[28px] leading-8 col-span-6 lg:col-span-1'
      >{`{0${idx}}`}</span
    >
    <div
      class='flex flex-col justify-center col-span-6 row-start-3 lg:justify-start lg:col-span-1 lg:row-start-2'
    >
      {images[imgPath] && <Image src={images[imgPath]()} alt={imgAlt} />}
    </div>
    <div
      class='flex flex-col lg:flex-col col-span-6 row-start-2 lg:col-span-1 lg:col-start-2 lg:row-span-2'
    >
      <h3
        class='font-medium text-[28px] lg:text-4xl leading-[44px] mb-7 lg:mb-12'
      >
        {title}
      </h3>
      <p class='lg:text-[22px] leading-8'>{(<Content />)}</p>
    </div>
  </section>
</div>
