---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
import circleCheckIcon from "../../assets/circle-check-icon.svg";
import paulJeszenszky from "../../assets/paul-jeszenszky.png";
import picCrocoderTeam from "../../assets/pic-crocoder-team-3362ae.png";
import quoteIcon from "../../assets/quote-icon.svg";
import targetIconCorrect from "../../assets/target-icon-correct.svg";
import Pill from "../../components/Pill.astro";
import Section from "../../components/Section.astro";

const fitCheckVariants = (await getCollection("staff_fit_check")) as {
  data: {
    id: number;
    checks: {
      highlight: string;
      text: string;
    }[];
  };
}[];

const fitChecksVariantId = Number(
  Astro.url.searchParams.get("fitChecksVariant") || 1
);

let fitChecks = fitCheckVariants.find(
  (collectionEntry) => collectionEntry.data.id === fitChecksVariantId
)?.data.checks;

if (!fitChecks) {
  fitChecks = fitCheckVariants[0].data.checks;
}
---

<Section
  className="!py-0 !px-0"
  contentClassName="relative before:absolute before:z-[-1] before:top-0 before:w-full before:h-full before:bg-[#4E5BC8] md:max-w-screen"
>
  <div
    class="px-4 md:px-7 py-18 md:py-24 bg-[#1E1A1A] rounded-t-4xl md:rounded-t-[96px]"
  >
    <div class="md:max-w-[var(--max-width)] md:mx-auto">
      <!-- Section Title -->
      <div
        class="flex flex-col items-center gap-4 mb-12 md:mb-24 px-1 md:px-2 xl:px-[104px] mx-auto"
      >
        <Pill>We're 100% Focused on results</Pill>
        <h2
          class="text-[32px] leading-[36px] md:text-[48px] md:leading-[52px] lg:text-[60px] lg:leading-[66px] xl:text-[74px] xl:leading-[81px] font-medium tracking-[-2%] text-center"
        >
          <span class="text-white block md:whitespace-nowrap"
            >Flexible, Embedded Engineers,</span
          >
          <span class="text-[#FEC343] block">Ready to Plug-In</span>
        </h2>
      </div>

      <!-- Content Container -->
      <div class="pb-12 md:pb-24">
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-4">
          <!-- Left Column -->
          <div class="space-y-4">
            <!-- Main Description Card -->
            <div
              class="bg-[rgba(66,76,109,0.9)] rounded-2xl p-6 md:p-12 text-white"
            >
              <div
                class="w-[60px] h-[60px] md:w-[90px] md:h-[90px] flex items-center justify-center mb-6 md:mb-7"
              >
                <Image
                  src={targetIconCorrect}
                  alt="Target icon"
                  width={90}
                  height={90}
                  loading="lazy"
                  class="w-full h-full"
                />
              </div>
              <div class="space-y-4 md:space-y-7">
                <p
                  class="text-[16px] leading-[24px] md:text-[22px] md:leading-[32px] font-normal"
                >
                  We offer <b>on-demand staff augmentation</b> with web engineers
                  who blend <b>technical excellence</b>, <b>product intuition</b
                  >, and <b>strong communication</b>.
                </p>
                <p
                  class="text-[16px] leading-[24px] md:text-[22px] md:leading-[32px] font-normal"
                >
                  Whether you need a <b>junior developer</b> to support your team,
                  or a <b>product-minded lead</b> to drive an initiative, we <b
                    >match talent to your exact needs</b
                  > and fast.
                </p>
                <p
                  class="text-[16px] leading-[24px] md:text-[22px] md:leading-[32px] font-normal"
                >
                  Our engineers <b>take initiative</b> instead of waiting on tasks.
                  They <b>think critically</b>, <b>act independently</b>, and <b
                    >ship with care</b
                  >.
                </p>
              </div>
            </div>

            <!-- Testimonial Card -->
            <div
              class="bg-white rounded-2xl p-4 md:p-7 backdrop-blur-[30px] flex flex-col md:flex-row gap-4"
            >
              <div class="flex-1">
                <p
                  class="text-sm md:text-base leading-[22px] md:leading-[26px] text-black mb-4 md:mb-7"
                >
                  We have found the perfect extension of our team with CroCoder.
                  We operate as one team, celebrating our wins and working
                  through the challenges together. They "own" the roadmap,
                  deadlines and outcomes with us â€” from the ideation and
                  direction stages through to post-launch optimization.
                </p>
                <div class="flex items-center gap-3">
                  <div
                    class="w-[48px] h-[48px] md:w-[72px] md:h-[72px] rounded-full overflow-hidden flex-shrink-0"
                  >
                    <Image
                      src={paulJeszenszky}
                      alt="Paul Jeszenszky"
                      width={72}
                      height={72}
                      class="w-full h-full object-cover"
                      loading="lazy"
                    />
                  </div>
                  <div>
                    <p
                      class="text-[16px] md:text-[20px] leading-[22px] md:leading-[28px] text-black font-medium"
                    >
                      Paul Jeszenszky
                    </p>
                    <p
                      class="text-[14px] md:text-[20px] leading-[20px] md:leading-[28px] text-black"
                    >
                      Submix co-founder & CEO
                    </p>
                  </div>
                </div>
              </div>
              <div
                class="w-[60px] h-[40px] md:w-[82px] md:h-[54px] opacity-20 self-start md:self-auto"
              >
                <Image
                  src={quoteIcon}
                  alt="Quote icon"
                  width={82}
                  height={54}
                  loading="lazy"
                  class="w-full h-full"
                />
              </div>
            </div>
          </div>

          <!-- Right Column - Ideal for Teams Card -->
          <div
            class="bg-[rgba(60,56,67,0.8)] rounded-2xl p-6 md:p-12 text-white flex flex-col justify-center"
          >
            <h3
              class="text-[24px] leading-[28px] md:text-[36px] md:leading-[40px] font-medium mb-4 md:mb-7"
            >
              Ideal for Teams who
            </h3>
            <div class="space-y-4 md:space-y-7 mb-4 md:mb-7">
              {
                fitChecks.map((check) => (
                  <div class="flex gap-4 md:gap-7">
                    <div class="w-8 h-8 md:w-12 md:h-12 flex-shrink-0">
                      <Image
                        src={circleCheckIcon}
                        alt="Check icon"
                        width={48}
                        height={48}
                        loading="lazy"
                        class="w-full h-full"
                      />
                    </div>
                    <div>
                      <p class="text-[16px] mb-2 leading-[24px] md:text-[22px] md:leading-[32px] md:h-8 flex items-center font-semibold">
                        {check.highlight}
                      </p>
                      <p class="text-[16px] leading-[24px] md:text-[22px] md:leading-[32px]">
                        {check.text}
                      </p>
                    </div>
                  </div>
                ))
              }
            </div>

            <div class="flex justify-center">
              <Image
                src={picCrocoderTeam}
                alt="CroCoder team"
                widths={[320, 480, 640, 800]}
                sizes="(max-width: 768px) calc(100vw - 32px), 640px"
                loading="lazy"
                class="w-full max-w-[625px] h-auto"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Section>
